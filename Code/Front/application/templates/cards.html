<!doctype html>
<html>
    <head>   
        <title>Card Test</title>        
    </head>
    <body>
        {% with messages = get_flashed_messages(category_filter=["error"]) %}
        {% if messages %}
            <ul class=flashes>
            {% for message in messages %}
                <li>{{ message }}</li>
            {% endfor %}
            </ul>
        {% endif %}
        {% endwith %}
        <hr>
        Your Hand:
        <hr>
        {% with cards = get_flashed_messages(category_filter=["cards"]) %}
        {% if cards %}
        <div class="cardlist", id = "cardlist">      
            {% for card in cards %}
            <!img src = "../static/pokerimg/h5.jpg", alt = {{card}}>
            <img src = {{card}}, alt = {{card}}, onclick="clickCard(this)", class = "a_card">
            {% endfor %}     
        </div>
        <button type="button", onclick = "submitChosen()">Submit!</button>
        <button type="button", onclick = "clearAll()">Clear All</button>
        
        {% else %}    
        You Have No Cards HAHAHA!
        {% endif %}
        {% endwith %}
        <hr>
        <script>
            var all_cards = document.getElementsByClassName("a_card")
            function clickCard(self)
            {  
                if(self.chosen)
                {
                    self.style.cssText = "position:relative;top:0px;"
                    self.chosen = false
                }
                else
                {
                    self.style.cssText = "position:relative;top:-20px;"
                    self.chosen = true
                }  
            }
            function submitChosen()
            {
                var chosen_cards = new Array()                
                for(card in all_cards.length)
                {
                    if (all_cards[card].chosen)
                        chosen_cards.push(all_cards[card])
                }
                alert(all_cards)
                alert(chosen_cards)
                alert(window.location.pathname)
                var subForm = document.createElement("form")
                subForm.method = "post"
                subForm.action = window.location.pathname
                subForm.style.display = "none";
                var subInput = document.createElement("input")
                subInput.name = 'Cards'
                subInput.value = 'chosen_cards'
                subForm.appendChild(subInput)
                document.body.appendChild(subForm);  
                subForm.submit();  
                document.body.removeChild(subForm);
            }
            function clearAll()
            {               
                for(card in all_cards)
                {
                    all_cards[card].style.cssText = "position:relative;top:0px;"
                    all_cards[card].chosen = false
                }
            }
            </script>
    </body>
</html>
<title>A test for cards</title>

